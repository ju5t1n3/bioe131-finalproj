<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Protein Viewer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/3Dmol/2.0.0/3Dmol-min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        .container {
            width: 80%;
            margin: 0 auto;
            text-align: center;
        }
        .viewer {
            width: 600px;
            height: 400px;
            margin: 20px auto; /* Center horizontally */
            border: 1px solid #ccc;
            position: relative; /* Prevent floating */
            display: block; /* Each viewer in its own block */
        }
        .viewer-title {
            font-size: 1.2em;
            margin: 20px 0;
        }
        .description {
            margin-bottom: 30px;
            font-size: 1.2em;
            color: #333;
        }
        .title {
            margin-top: 20px;
            margin-bottom: 20px;
            font-family: Arial, Helvetica, sans-serif;
            text-align: center;
        }
        .header {
            margin-top: 20px;
            margin-bottom: 20px;
            font-family: Arial, Helvetica, sans-serif;
            text-align: center;
        }
    </style>
</head>
<body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <h1 class="title"><u>Explore Filovirus Protein Structures</u></h1>

    <div class="container">
        <h2 class="header"><u>Aim</u></h2>
        <p class="description">
            This webpage showcases the potential of advanced protein structure prediction and generative modeling techniques in understanding and harnessing the therapeutic 
            potential of proteins from the Filovirus genome. We aim to host and display 3D structures of select Filovirus proteins, providing detailed insights into their structural 
            features. We leveraged the ESM3 generative model to design novel proteins by using selected binding or receptor motifs from these 
            proteins as scaffolds. This work demonstrates the adaptability of generative diffusion models in creating hypothetical protein structures that could inform therapeutic 
            strategies. While these generated proteins are not validated binders, they serve as a proof of concept for the innovative use of AI-driven approaches in therapeutic design. 
            Ultimately, this platform seeks to inspire and educate researchers and students about the intersections of computational biology, protein engineering, and therapeutic innovation.

        </p>
    </div>
    <!-- Image and Description -->
    <div class="container">
        <img src="media/esm3_diagram.png" alt="ESM Protein Diagram" style="width: 800px; height: 400px; margin-bottom: 30px;">
        <p class="description">
            This page displays 3D visualizations of available filovirus associated protein structures. Use the viewers below to explore the structure of each protein in detail.
            Also check out a protein generated by ESM3 using a structural motif as a scaffold. 
        </p>
    </div>
    
    <div class="container">
        <!-- Viewer for Protein 1 -->
        <h2 class="viewer-title">
            <a href="pages/6F6N.html">GP - Envelope glycoprotein (PDB ID: 6F6N)</a>
        </h2>
        <div id="viewer-6F6N" class="viewer"></div>

        <!-- Viewer for Protein 2 -->
        <h2 class="viewer-title">
            <a href="pages/4ZTA.html">Polymerase cofactor VP35 (PDB ID: 4ZTA)</a>
        </h2>
        <div id="viewer-4ZTA" class="viewer"></div>

        <!-- Viewer for Protein 3 -->
        <h2 class="viewer-title">
            <a href="pages/4M0Q.html">Membrane-associated protein VP24 (PDB ID: 4M0Q)</a>
        </h2>
        <div id="viewer-4M0Q" class="viewer"></div>

        <!-- Viewer for Protein 4 -->
        <h2 class="viewer-title">
            <a href="pages/5T3T.html">NP - Nucleoprotein (PDB ID: 5T3T)</a>
        </h2>
        <div id="viewer-5T3T" class="viewer"></div>

        <!-- Viewer for Protein 5 -->
        <h2 class="viewer-title">
            <a href="pages/5DVW.html">Transcriptional activator VP30 (PDB ID: 5DVW)</a>
        </h2>
        <div id="viewer-5DVW" class="viewer"></div>

        <!-- Viewer for Protein 6 -->
        <h2 class="viewer-title">
            <a href="pages/4EJE.html">Matrix protein VP40 (PDB ID: 4EJE)</a>
        </h2>
        <div id="viewer-4EJE" class="viewer"></div>
    </div>

    <script>
        // Function to initialize a viewer for a specific div and PDB file
        function loadProtein(viewerId, pdbPath) {
            const viewer = $3Dmol.createViewer(viewerId, {backgroundColor: "white"});
            fetch(pdbPath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Failed to load PDB file: ${response.statusText}`);
                    }
                    return response.text();
                })
                .then(pdbContent => {
                    viewer.addModel(pdbContent, "pdb"); // Add the PDB model
                    viewer.setStyle({}, {cartoon: {color: "spectrum"}}); // Apply cartoon style
                    viewer.zoomTo(); // Center the view
                    viewer.render(); // Render the viewer
                })
                .catch(error => {
                    console.error(`Error loading PDB file (${pdbPath}):`, error);
                });
        }

        // Load multiple proteins
        loadProtein("viewer-6F6N", "pdb_structures/6F6N.pdb");
        loadProtein("viewer-4ZTA", "pdb_structures/4ZTA.pdb");
        loadProtein("viewer-4M0Q", "pdb_structures/4M0Q.pdb");
        loadProtein("viewer-5T3T", "pdb_structures/5T3T.pdb");
        loadProtein("viewer-5DVW", "pdb_structures/5DVW.pdb");
        loadProtein("viewer-4EJE", "pdb_structures/4EJE.pdb");
    </script>
</body>
</html>
